
{% extends 'small/base.html' %}

{% block content %}

<div class="container p-4 m-4">
	
	<h1>Articles</h1>

	<div class="article-container" id="article-container">

		<!-- {% for article in articles %}
			<div class="article">
				<div class="title">
					<h3>{{ article.title }}</h3>
				</div>
				<div class="content">
					<p class="lead">{{ article.content }}</p>
				</div>
				<div class="d-flex justify-content-between">
					<div class="author">
						<small>{{ article.author.user.username }}</small>
					</div>
					<div class="likes">
						<small>{{ article.like }} Like{{ article.like|pluralize }}</small>
					</div>
				</div>
			</div>
		{% endfor %} -->
		<h1>Loading ........</h1>
	</div>

</div>


<script type="text/javascript">

	const articleElem = document.getElementById("article-container");
	
	var articleData = JSON.parse("{{ articleJSON|escapejs }}");
	let article_html = ""

	// console.log(articleData)

	articleData.map( article => {
		article_html += `<div class="article" id="${article.id}">
				<div class="title">
					<h3>${article.title}</h3>
				</div>
				<div class="content">
					<p class="lead">${article.content}</p>
				</div>
				<div class="d-flex justify-content-between">
					<div class="author">
						<small>${article.author.name}</small>
					</div>
					<div class="likes">
						<small>${article.like } Like</small>
					</div>
				</div>
			</div>`
	})
	// console.log(article_html)
	articleElem.innerHTML = article_html;

</script>

{% endblock content %}